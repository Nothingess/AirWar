(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.protobuf=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";module.exports=asPromise;function asPromise(fn,ctx){var params=new Array(arguments.length-1),offset=0,index=2,pending=true;while(index<arguments.length)params[offset++]=arguments[index++];return new Promise(function executor(resolve,reject){params[offset]=function callback(err){if(pending){pending=false;if(err)reject(err);else{var params=new Array(arguments.length-1),offset=0;while(offset<params.length)params[offset++]=arguments[offset];resolve.apply(null,params)}}};try{fn.apply(ctx||null,params)}catch(err){if(pending){pending=false;reject(err)}}})}},{}],2:[function(require,module,exports){"use strict";var base64=exports;base64.length=function length(string){var p=string.length;if(!p)return 0;var n=0;while(--p%4>1&&string.charAt(p)==="=")++n;return Math.ceil(string.length*3)/4-n};var b64=new Array(64);var s64=new Array(123);for(var i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64.encode=function encode(buffer,start,end){var parts=null,chunk=[];var i=0,j=0,t;while(start<end){var b=buffer[start++];switch(j){case 0:chunk[i++]=b64[b>>2];t=(b&3)<<4;j=1;break;case 1:chunk[i++]=b64[t|b>>4];t=(b&15)<<2;j=2;break;case 2:chunk[i++]=b64[t|b>>6];chunk[i++]=b64[b&63];j=0;break}if(i>8191){(parts||(parts=[])).push(String.fromCharCode.apply(String,chunk));i=0}}if(j){chunk[i++]=b64[t];chunk[i++]=61;if(j===1)chunk[i++]=61}if(parts){if(i)parts.push(String.fromCharCode.apply(String,chunk.slice(0,i)));return parts.join("")}return String.fromCharCode.apply(String,chunk.slice(0,i))};var invalidEncoding="invalid encoding";base64.decode=function decode(string,buffer,offset){var start=offset;var j=0,t;for(var i=0;i<string.length;){var c=string.charCodeAt(i++);if(c===61&&j>1)break;if((c=s64[c])===undefined)throw Error(invalidEncoding);switch(j){case 0:t=c;j=1;break;case 1:buffer[offset++]=t<<2|(c&48)>>4;t=c;j=2;break;case 2:buffer[offset++]=(t&15)<<4|(c&60)>>2;t=c;j=3;break;case 3:buffer[offset++]=(t&3)<<6|c;j=0;break}}if(j===1)throw Error(invalidEncoding);return offset-start};base64.test=function test(string){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string)}},{}],3:[function(require,module,exports){"use strict";module.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function on(evt,fn,ctx){(this._listeners[evt]||(this._listeners[evt]=[])).push({fn:fn,ctx:ctx||this});return this};EventEmitter.prototype.off=function off(evt,fn){if(evt===undefined)this._listeners={};else{if(fn===undefined)this._listeners[evt]=[];else{var listeners=this._listeners[evt];for(var i=0;i<listeners.length;)if(listeners[i].fn===fn)listeners.splice(i,1);else++i}}return this};EventEmitter.prototype.emit=function emit(evt){var listeners=this._listeners[evt];if(listeners){var args=[],i=1;for(;i<arguments.length;)args.push(arguments[i++]);for(i=0;i<listeners.length;)listeners[i].fn.apply(listeners[i++].ctx,args)}return this}},{}],4:[function(require,module,exports){"use strict";module.exports=factory(factory);function factory(exports){if(typeof Float32Array!=="undefined")(function(){var f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer),le=f8b[3]===128;function writeFloat_f32_cpy(val,buf,pos){f32[0]=val;buf[pos]=f8b[0];buf[pos+1]=f8b[1];buf[pos+2]=f8b[2];buf[pos+3]=f8b[3]}function writeFloat_f32_rev(val,buf,pos){f32[0]=val;buf[pos]=f8b[3];buf[pos+1]=f8b[2];buf[pos+2]=f8b[1];buf[pos+3]=f8b[0]}exports.writeFloatLE=le?writeFloat_f32_cpy:writeFloat_f32_rev;exports.writeFloatBE=le?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(buf,pos){f8b[0]=buf[pos];f8b[1]=buf[pos+1];f8b[2]=buf[pos+2];f8b[3]=buf[pos+3];return f32[0]}function readFloat_f32_rev(buf,pos){f8b[3]=buf[pos];f8b[2]=buf[pos+1];f8b[1]=buf[pos+2];f8b[0]=buf[pos+3];return f32[0]}exports.readFloatLE=le?readFloat_f32_cpy:readFloat_f32_rev;exports.readFloatBE=le?readFloat_f32_rev:readFloat_f32_cpy})();else(function(){function writeFloat_ieee754(writeUint,val,buf,pos){var sign=val<0?1:0;if(sign)val=-val;if(val===0)writeUint(1/val>0?0:2147483648,buf,pos);else if(isNaN(val))writeUint(2143289344,buf,pos);else if(val>34028234663852886e22)writeUint((sign<<31|2139095040)>>>0,buf,pos);else if(val<11754943508222875e-54)writeUint((sign<<31|Math.round(val/1401298464324817e-60))>>>0,buf,pos);else{var exponent=Math.floor(Math.log(val)/Math.LN2),mantissa=Math.round(val*Math.pow(2,-exponent)*8388608)&8388607;writeUint((sign<<31|exponent+127<<23|mantissa)>>>0,buf,pos)}}exports.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE);exports.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(readUint,buf,pos){var uint=readUint(buf,pos),sign=(uint>>31)*2+1,exponent=uint>>>23&255,mantissa=uint&8388607;return exponent===255?mantissa?NaN:sign*Infinity:exponent===0?sign*1401298464324817e-60*mantissa:sign*Math.pow(2,exponent-150)*(mantissa+8388608)}exports.readFloatLE=readFloat_ieee754.bind(null,readUintLE);exports.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var f64=new Float64Array([-0]),f8b=new Uint8Array(f64.buffer),le=f8b[7]===128;function writeDouble_f64_cpy(val,buf,pos){f64[0]=val;buf[pos]=f8b[0];buf[pos+1]=f8b[1];buf[pos+2]=f8b[2];buf[pos+3]=f8b[3];buf[pos+4]=f8b[4];buf[pos+5]=f8b[5];buf[pos+6]=f8b[6];buf[pos+7]=f8b[7]}function writeDouble_f64_rev(val,buf,pos){f64[0]=val;buf[pos]=f8b[7];buf[pos+1]=f8b[6];buf[pos+2]=f8b[5];buf[pos+3]=f8b[4];buf[pos+4]=f8b[3];buf[pos+5]=f8b[2];buf[pos+6]=f8b[1];buf[pos+7]=f8b[0]}exports.writeDoubleLE=le?writeDouble_f64_cpy:writeDouble_f64_rev;exports.writeDoubleBE=le?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(buf,pos){f8b[0]=buf[pos];f8b[1]=buf[pos+1];f8b[2]=buf[pos+2];f8b[3]=buf[pos+3];f8b[4]=buf[pos+4];f8b[5]=buf[pos+5];f8b[6]=buf[pos+6];f8b[7]=buf[pos+7];return f64[0]}function readDouble_f64_rev(buf,pos){f8b[7]=buf[pos];f8b[6]=buf[pos+1];f8b[5]=buf[pos+2];f8b[4]=buf[pos+3];f8b[3]=buf[pos+4];f8b[2]=buf[pos+5];f8b[1]=buf[pos+6];f8b[0]=buf[pos+7];return f64[0]}exports.readDoubleLE=le?readDouble_f64_cpy:readDouble_f64_rev;exports.readDoubleBE=le?readDouble_f64_rev:readDouble_f64_cpy})();else(function(){function writeDouble_ieee754(writeUint,off0,off1,val,buf,pos){var sign=val<0?1:0;if(sign)val=-val;if(val===0){writeUint(0,buf,pos+off0);writeUint(1/val>0?0:2147483648,buf,pos+off1)}else if(isNaN(val)){writeUint(0,buf,pos+off0);writeUint(2146959360,buf,pos+off1)}else if(val>17976931348623157e292){writeUint(0,buf,pos+off0);writeUint((sign<<31|2146435072)>>>0,buf,pos+off1)}else{var mantissa;if(val<22250738585072014e-324){mantissa=val/5e-324;writeUint(mantissa>>>0,buf,pos+off0);writeUint((sign<<31|mantissa/4294967296)>>>0,buf,pos+off1)}else{var exponent=Math.floor(Math.log(val)/Math.LN2);if(exponent===1024)exponent=1023;mantissa=val*Math.pow(2,-exponent);writeUint(mantissa*4503599627370496>>>0,buf,pos+off0);writeUint((sign<<31|exponent+1023<<20|mantissa*1048576&1048575)>>>0,buf,pos+off1)}}}exports.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4);exports.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(readUint,off0,off1,buf,pos){var lo=readUint(buf,pos+off0),hi=readUint(buf,pos+off1);var sign=(hi>>31)*2+1,exponent=hi>>>20&2047,mantissa=4294967296*(hi&1048575)+lo;return exponent===2047?mantissa?NaN:sign*Infinity:exponent===0?sign*5e-324*mantissa:sign*Math.pow(2,exponent-1075)*(mantissa+4503599627370496)}exports.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4);exports.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})();return exports}function writeUintLE(val,buf,pos){buf[pos]=val&255;buf[pos+1]=val>>>8&255;buf[pos+2]=val>>>16&255;buf[pos+3]=val>>>24}function writeUintBE(val,buf,pos){buf[pos]=val>>>24;buf[pos+1]=val>>>16&255;buf[pos+2]=val>>>8&255;buf[pos+3]=val&255}function readUintLE(buf,pos){return(buf[pos]|buf[pos+1]<<8|buf[pos+2]<<16|buf[pos+3]<<24)>>>0}function readUintBE(buf,pos){return(buf[pos]<<24|buf[pos+1]<<16|buf[pos+2]<<8|buf[pos+3])>>>0}},{}],5:[function(require,module,exports){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],6:[function(require,module,exports){"use strict";module.exports=pool;function pool(alloc,slice,size){var SIZE=size||8192;var MAX=SIZE>>>1;var slab=null;var offset=SIZE;return function pool_alloc(size){if(size<1||size>MAX)return alloc(size);if(offset+size>SIZE){slab=alloc(SIZE);offset=0}var buf=slice.call(slab,offset,offset+=size);if(offset&7)offset=(offset|7)+1;return buf}}},{}],7:[function(require,module,exports){"use strict";var utf8=exports;utf8.length=function utf8_length(string){var len=0,c=0;for(var i=0;i<string.length;++i){c=string.charCodeAt(i);if(c<128)len+=1;else if(c<2048)len+=2;else if((c&64512)===55296&&(string.charCodeAt(i+1)&64512)===56320){++i;len+=4}else len+=3}return len};utf8.read=function utf8_read(buffer,start,end){var len=end-start;if(len<1)return"";var parts=null,chunk=[],i=0,t;while(start<end){t=buffer[start++];if(t<128)chunk[i++]=t;else if(t>191&&t<224)chunk[i++]=(t&31)<<6|buffer[start++]&63;else if(t>239&&t<365){t=((t&7)<<18|(buffer[start++]&63)<<12|(buffer[start++]&63)<<6|buffer[start++]&63)-65536;chunk[i++]=55296+(t>>10);chunk[i++]=56320+(t&1023)}else chunk[i++]=(t&15)<<12|(buffer[start++]&63)<<6|buffer[start++]&63;if(i>8191){(parts||(parts=[])).push(String.fromCharCode.apply(String,chunk));i=0}}if(parts){if(i)parts.push(String.fromCharCode.apply(String,chunk.slice(0,i)));return parts.join("")}return String.fromCharCode.apply(String,chunk.slice(0,i))};utf8.write=function utf8_write(string,buffer,offset){var start=offset,c1,c2;for(var i=0;i<string.length;++i){c1=string.charCodeAt(i);if(c1<128){buffer[offset++]=c1}else if(c1<2048){buffer[offset++]=c1>>6|192;buffer[offset++]=c1&63|128}else if((c1&64512)===55296&&((c2=string.charCodeAt(i+1))&64512)===56320){c1=65536+((c1&1023)<<10)+(c2&1023);++i;buffer[offset++]=c1>>18|240;buffer[offset++]=c1>>12&63|128;buffer[offset++]=c1>>6&63|128;buffer[offset++]=c1&63|128}else{buffer[offset++]=c1>>12|224;buffer[offset++]=c1>>6&63|128;buffer[offset++]=c1&63|128}}return offset-start}},{}],8:[function(require,module,exports){"use strict";var protobuf=exports;protobuf.build="minimal";protobuf.Writer=require("./writer");protobuf.BufferWriter=require("./writer_buffer");protobuf.Reader=require("./reader");protobuf.BufferReader=require("./reader_buffer");protobuf.util=require("./util/minimal");protobuf.rpc=require("./rpc");protobuf.roots=require("./roots");protobuf.configure=configure;function configure(){protobuf.Reader._configure(protobuf.BufferReader);protobuf.util._configure()}protobuf.Writer._configure(protobuf.BufferWriter);configure()},{"./reader":9,"./reader_buffer":10,"./roots":11,"./rpc":12,"./util/minimal":15,"./writer":16,"./writer_buffer":17}],9:[function(require,module,exports){"use strict";module.exports=Reader;var util=require("./util/minimal");var BufferReader;var LongBits=util.LongBits,utf8=util.utf8;function indexOutOfRange(reader,writeLength){return RangeError("index out of range: "+reader.pos+" + "+(writeLength||1)+" > "+reader.len)}function Reader(buffer){this.buf=buffer;this.pos=0;this.len=buffer.length}var create_array=typeof Uint8Array!=="undefined"?function create_typed_array(buffer){if(buffer instanceof Uint8Array||Array.isArray(buffer))return new Reader(buffer);throw Error("illegal buffer")}:function create_array(buffer){if(Array.isArray(buffer))return new Reader(buffer);throw Error("illegal buffer")};Reader.create=util.Buffer?function create_buffer_setup(buffer){return(Reader.create=function create_buffer(buffer){return util.Buffer.isBuffer(buffer)?new BufferReader(buffer):create_array(buffer)})(buffer)}:create_array;Reader.prototype._slice=util.Array.prototype.subarray||util.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var value=4294967295;return function read_uint32(){value=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return value;value=(value|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return value;value=(value|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return value;value=(value|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return value;value=(value|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return value}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var value=this.uint32();return value>>>1^-(value&1)|0};function readLongVarint(){var bits=new LongBits(0,0);var i=0;if(this.len-this.pos>4){for(;i<4;++i){bits.lo=(bits.lo|(this.buf[this.pos]&127)<<i*7)>>>0;if(this.buf[this.pos++]<128)return bits}bits.lo=(bits.lo|(this.buf[this.pos]&127)<<28)>>>0;bits.hi=(bits.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return bits;i=0}else{for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);bits.lo=(bits.lo|(this.buf[this.pos]&127)<<i*7)>>>0;if(this.buf[this.pos++]<128)return bits}bits.lo=(bits.lo|(this.buf[this.pos++]&127)<<i*7)>>>0;return bits}if(this.len-this.pos>4){for(;i<5;++i){bits.hi=(bits.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0;if(this.buf[this.pos++]<128)return bits}}else{for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);bits.hi=(bits.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0;if(this.buf[this.pos++]<128)return bits}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(buf,end){return(buf[end-4]|buf[end-3]<<8|buf[end-2]<<16|buf[end-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var value=util.float.readFloatLE(this.buf,this.pos);this.pos+=4;return value};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var value=util.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return value};Reader.prototype.bytes=function read_bytes(){var length=this.uint32(),start=this.pos,end=this.pos+length;if(end>this.len)throw indexOutOfRange(this,length);this.pos+=length;if(Array.isArray(this.buf))return this.buf.slice(start,end);return start===end?new this.buf.constructor(0):this._slice.call(this.buf,start,end)};Reader.prototype.string=function read_string(){var bytes=this.bytes();return utf8.read(bytes,0,bytes.length)};Reader.prototype.skip=function skip(length){if(typeof length==="number"){if(this.pos+length>this.len)throw indexOutOfRange(this,length);this.pos+=length}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(wireType){switch(wireType){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((wireType=this.uint32()&7)!==4){this.skipType(wireType)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+wireType+" at offset "+this.pos)}return this};Reader._configure=function(BufferReader_){BufferReader=BufferReader_;var fn=util.Long?"toLong":"toNumber";util.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[fn](false)},uint64:function read_uint64(){return readLongVarint.call(this)[fn](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[fn](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[fn](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[fn](false)}})}},{"./util/minimal":15}],10:[function(require,module,exports){"use strict";module.exports=BufferReader;var Reader=require("./reader");(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util=require("./util/minimal");function BufferReader(buffer){Reader.call(this,buffer)}if(util.Buffer)BufferReader.prototype._slice=util.Buffer.prototype.slice;BufferReader.prototype.string=function read_string_buffer(){var len=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+len,this.len))}},{"./reader":9,"./util/minimal":15}],11:[function(require,module,exports){"use strict";module.exports={}},{}],12:[function(require,module,exports){"use strict";var rpc=exports;rpc.Service=require("./rpc/service")},{"./rpc/service":13}],13:[function(require,module,exports){"use strict";module.exports=Service;var util=require("../util/minimal");(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(rpcImpl,requestDelimited,responseDelimited){if(typeof rpcImpl!=="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this);this.rpcImpl=rpcImpl;this.requestDelimited=Boolean(requestDelimited);this.responseDelimited=Boolean(responseDelimited)}Service.prototype.rpcCall=function rpcCall(method,requestCtor,responseCtor,request,callback){if(!request)throw TypeError("request must be specified");var self=this;if(!callback)return util.asPromise(rpcCall,self,method,requestCtor,responseCtor,request);if(!self.rpcImpl){setTimeout(function(){callback(Error("already ended"))},0);return undefined}try{return self.rpcImpl(method,requestCtor[self.requestDelimited?"encodeDelimited":"encode"](request).finish(),function rpcCallback(err,response){if(err){self.emit("error",err,method);return callback(err)}if(response===null){self.end(true);return undefined}if(!(response instanceof responseCtor)){try{response=responseCtor[self.responseDelimited?"decodeDelimited":"decode"](response)}catch(err){self.emit("error",err,method);return callback(err)}}self.emit("data",response,method);return callback(null,response)})}catch(err){self.emit("error",err,method);setTimeout(function(){callback(err)},0);return undefined}};Service.prototype.end=function end(endedByRPC){if(this.rpcImpl){if(!endedByRPC)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},{"../util/minimal":15}],14:[function(require,module,exports){"use strict";module.exports=LongBits;var util=require("../util/minimal");function LongBits(lo,hi){this.lo=lo>>>0;this.hi=hi>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(value){if(value===0)return zero;var sign=value<0;if(sign)value=-value;var lo=value>>>0,hi=(value-lo)/4294967296>>>0;if(sign){hi=~hi>>>0;lo=~lo>>>0;if(++lo>4294967295){lo=0;if(++hi>4294967295)hi=0}}return new LongBits(lo,hi)};LongBits.from=function from(value){if(typeof value==="number")return LongBits.fromNumber(value);if(util.isString(value)){if(util.Long)value=util.Long.fromString(value);else return LongBits.fromNumber(parseInt(value,10))}return value.low||value.high?new LongBits(value.low>>>0,value.high>>>0):zero};LongBits.prototype.toNumber=function toNumber(unsigned){if(!unsigned&&this.hi>>>31){var lo=~this.lo+1>>>0,hi=~this.hi>>>0;if(!lo)hi=hi+1>>>0;return-(lo+hi*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(unsigned){return util.Long?new util.Long(this.lo|0,this.hi|0,Boolean(unsigned)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(unsigned)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(hash){if(hash===zeroHash)return zero;return new LongBits((charCodeAt.call(hash,0)|charCodeAt.call(hash,1)<<8|charCodeAt.call(hash,2)<<16|charCodeAt.call(hash,3)<<24)>>>0,(charCodeAt.call(hash,4)|charCodeAt.call(hash,5)<<8|charCodeAt.call(hash,6)<<16|charCodeAt.call(hash,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var mask=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^mask)>>>0;this.lo=(this.lo<<1^mask)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var mask=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^mask)>>>0;this.hi=(this.hi>>>1^mask)>>>0;return this};LongBits.prototype.length=function length(){var part0=this.lo,part1=(this.lo>>>28|this.hi<<4)>>>0,part2=this.hi>>>24;return part2===0?part1===0?part0<16384?part0<128?1:2:part0<2097152?3:4:part1<16384?part1<128?5:6:part1<2097152?7:8:part2<128?9:10}},{"../util/minimal":15}],15:[function(require,module,exports){(function(global){"use strict";var util=exports;util.asPromise=require("@protobufjs/aspromise");util.base64=require("@protobufjs/base64");util.EventEmitter=require("@protobufjs/eventemitter");util.float=require("@protobufjs/float");util.inquire=require("@protobufjs/inquire");util.utf8=require("@protobufjs/utf8");util.pool=require("@protobufjs/pool");util.LongBits=require("./longbits");util.global=typeof window!=="undefined"&&window||typeof global!=="undefined"&&global||typeof self!=="undefined"&&self||this;util.emptyArray=Object.freeze?Object.freeze([]):[];util.emptyObject=Object.freeze?Object.freeze({}):{};util.isNode=Boolean(util.global.process&&util.global.process.versions&&util.global.process.versions.node);util.isInteger=Number.isInteger||function isInteger(value){return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value};util.isString=function isString(value){return typeof value==="string"||value instanceof String};util.isObject=function isObject(value){return value&&typeof value==="object"};util.isset=util.isSet=function isSet(obj,prop){var value=obj[prop];if(value!=null&&obj.hasOwnProperty(prop))return typeof value!=="object"||(Array.isArray(value)?value.length:Object.keys(value).length)>0;return false};util.Buffer=function(){try{var Buffer=util.inquire("buffer").Buffer;return Buffer.prototype.utf8Write?Buffer:null}catch(e){return null}}();util._Buffer_from=null;util._Buffer_allocUnsafe=null;util.newBuffer=function newBuffer(sizeOrArray){return typeof sizeOrArray==="number"?util.Buffer?util._Buffer_allocUnsafe(sizeOrArray):new util.Array(sizeOrArray):util.Buffer?util._Buffer_from(sizeOrArray):typeof Uint8Array==="undefined"?sizeOrArray:new Uint8Array(sizeOrArray)};util.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;util.Long=util.global.dcodeIO&&util.global.dcodeIO.Long||util.global.Long||util.inquire("long");util.key2Re=/^true|false|0|1$/;util.key32Re=/^-?(?:0|[1-9][0-9]*)$/;util.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;util.longToHash=function longToHash(value){return value?util.LongBits.from(value).toHash():util.LongBits.zeroHash};util.longFromHash=function longFromHash(hash,unsigned){var bits=util.LongBits.fromHash(hash);if(util.Long)return util.Long.fromBits(bits.lo,bits.hi,unsigned);return bits.toNumber(Boolean(unsigned))};function merge(dst,src,ifNotSet){for(var keys=Object.keys(src),i=0;i<keys.length;++i)if(dst[keys[i]]===undefined||!ifNotSet)dst[keys[i]]=src[keys[i]];return dst}util.merge=merge;util.lcFirst=function lcFirst(str){return str.charAt(0).toLowerCase()+str.substring(1)};function newError(name){function CustomError(message,properties){if(!(this instanceof CustomError))return new CustomError(message,properties);Object.defineProperty(this,"message",{get:function(){return message}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(properties)merge(this,properties)}(CustomError.prototype=Object.create(Error.prototype)).constructor=CustomError;Object.defineProperty(CustomError.prototype,"name",{get:function(){return name}});CustomError.prototype.toString=function toString(){return this.name+": "+this.message};return CustomError}util.newError=newError;util.ProtocolError=newError("ProtocolError");util.oneOfGetter=function getOneOf(fieldNames){var fieldMap={};for(var i=0;i<fieldNames.length;++i)fieldMap[fieldNames[i]]=1;return function(){for(var keys=Object.keys(this),i=keys.length-1;i>-1;--i)if(fieldMap[keys[i]]===1&&this[keys[i]]!==undefined&&this[keys[i]]!==null)return keys[i]}};util.oneOfSetter=function setOneOf(fieldNames){return function(name){for(var i=0;i<fieldNames.length;++i)if(fieldNames[i]!==name)delete this[fieldNames[i]]}};util.toJSONOptions={longs:String,enums:String,bytes:String,json:true};util._configure=function(){var Buffer=util.Buffer;if(!Buffer){util._Buffer_from=util._Buffer_allocUnsafe=null;return}util._Buffer_from=Buffer.from!==Uint8Array.from&&Buffer.from||function Buffer_from(value,encoding){return new Buffer(value,encoding)};util._Buffer_allocUnsafe=Buffer.allocUnsafe||function Buffer_allocUnsafe(size){return new Buffer(size)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./longbits":14,"@protobufjs/aspromise":1,"@protobufjs/base64":2,"@protobufjs/eventemitter":3,"@protobufjs/float":4,"@protobufjs/inquire":5,"@protobufjs/pool":6,"@protobufjs/utf8":7}],16:[function(require,module,exports){"use strict";module.exports=Writer;var util=require("./util/minimal");var BufferWriter;var LongBits=util.LongBits,base64=util.base64,utf8=util.utf8;function Op(fn,len,val){this.fn=fn;this.len=len;this.next=undefined;this.val=val}function noop(){}function State(writer){this.head=writer.head;this.tail=writer.tail;this.len=writer.len;this.next=writer.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}Writer.create=util.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new BufferWriter})()}:function create_array(){return new Writer};Writer.alloc=function alloc(size){return new util.Array(size)};if(util.Array!==Array)Writer.alloc=util.pool(Writer.alloc,util.Array.prototype.subarray);Writer.prototype._push=function push(fn,len,val){this.tail=this.tail.next=new Op(fn,len,val);this.len+=len;return this};function writeByte(val,buf,pos){buf[pos]=val&255}function writeVarint32(val,buf,pos){while(val>127){buf[pos++]=val&127|128;val>>>=7}buf[pos]=val}function VarintOp(len,val){this.len=len;this.next=undefined;this.val=val}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(value){this.len+=(this.tail=this.tail.next=new VarintOp((value=value>>>0)<128?1:value<16384?2:value<2097152?3:value<268435456?4:5,value)).len;return this};Writer.prototype.int32=function write_int32(value){return value<0?this._push(writeVarint64,10,LongBits.fromNumber(value)):this.uint32(value)};Writer.prototype.sint32=function write_sint32(value){return this.uint32((value<<1^value>>31)>>>0)};function writeVarint64(val,buf,pos){while(val.hi){buf[pos++]=val.lo&127|128;val.lo=(val.lo>>>7|val.hi<<25)>>>0;val.hi>>>=7}while(val.lo>127){buf[pos++]=val.lo&127|128;val.lo=val.lo>>>7}buf[pos++]=val.lo}Writer.prototype.uint64=function write_uint64(value){var bits=LongBits.from(value);return this._push(writeVarint64,bits.length(),bits)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(value){var bits=LongBits.from(value).zzEncode();return this._push(writeVarint64,bits.length(),bits)};Writer.prototype.bool=function write_bool(value){return this._push(writeByte,1,value?1:0)};function writeFixed32(val,buf,pos){buf[pos]=val&255;buf[pos+1]=val>>>8&255;buf[pos+2]=val>>>16&255;buf[pos+3]=val>>>24}Writer.prototype.fixed32=function write_fixed32(value){return this._push(writeFixed32,4,value>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(value){var bits=LongBits.from(value);return this._push(writeFixed32,4,bits.lo)._push(writeFixed32,4,bits.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(value){return this._push(util.float.writeFloatLE,4,value)};Writer.prototype.double=function write_double(value){return this._push(util.float.writeDoubleLE,8,value)};var writeBytes=util.Array.prototype.set?function writeBytes_set(val,buf,pos){buf.set(val,pos)}:function writeBytes_for(val,buf,pos){for(var i=0;i<val.length;++i)buf[pos+i]=val[i]};Writer.prototype.bytes=function write_bytes(value){var len=value.length>>>0;if(!len)return this._push(writeByte,1,0);if(util.isString(value)){var buf=Writer.alloc(len=base64.length(value));base64.decode(value,buf,0);value=buf}return this.uint32(len)._push(writeBytes,len,value)};Writer.prototype.string=function write_string(value){var len=utf8.length(value);return len?this.uint32(len)._push(utf8.write,len,value):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var head=this.head,tail=this.tail,len=this.len;this.reset().uint32(len);if(len){this.tail.next=head.next;this.tail=tail;this.len+=len}return this};Writer.prototype.finish=function finish(){var head=this.head.next,buf=this.constructor.alloc(this.len),pos=0;while(head){head.fn(head.val,buf,pos);pos+=head.len;head=head.next}return buf};Writer._configure=function(BufferWriter_){BufferWriter=BufferWriter_}},{"./util/minimal":15}],17:[function(require,module,exports){"use strict";module.exports=BufferWriter;var Writer=require("./writer");(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util=require("./util/minimal");var Buffer=util.Buffer;function BufferWriter(){Writer.call(this)}BufferWriter.alloc=function alloc_buffer(size){return(BufferWriter.alloc=util._Buffer_allocUnsafe)(size)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(val,buf,pos){buf.set(val,pos)}:function writeBytesBuffer_copy(val,buf,pos){if(val.copy)val.copy(buf,pos,0,val.length);else for(var i=0;i<val.length;)buf[pos++]=val[i++]};BufferWriter.prototype.bytes=function write_bytes_buffer(value){if(util.isString(value))value=util._Buffer_from(value,"base64");var len=value.length>>>0;this.uint32(len);if(len)this._push(writeBytesBuffer,len,value);return this};function writeStringBuffer(val,buf,pos){if(val.length<40)util.utf8.write(val,buf,pos);else buf.utf8Write(val,pos)}BufferWriter.prototype.string=function write_string_buffer(value){var len=Buffer.byteLength(value);this.uint32(len);if(len)this._push(writeStringBuffer,len,value);return this}},{"./util/minimal":15,"./writer":16}]},{},[8])(8)});(function($protobuf){"use strict";var $Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util;var $root=$protobuf.roots["default"]||($protobuf.roots["default"]={});$root.LCProto=window["LCProto"]=function(){var LCProto={};LCProto.User=function(){function User(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}User.prototype.name="";User.prototype.avatar="";User.prototype.isAI=false;User.create=function create(properties){return new User(properties)};User.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.name!=null&&Object.hasOwnProperty.call(message,"name"))writer.uint32(10).string(message.name);if(message.avatar!=null&&Object.hasOwnProperty.call(message,"avatar"))writer.uint32(18).string(message.avatar);if(message.isAI!=null&&Object.hasOwnProperty.call(message,"isAI"))writer.uint32(24).bool(message.isAI);return writer};User.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};User.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.User;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.name=reader.string();break;case 2:message.avatar=reader.string();break;case 3:message.isAI=reader.bool();break;default:reader.skipType(tag&7);break}}return message};User.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};User.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.name!=null&&message.hasOwnProperty("name"))if(!$util.isString(message.name))return"name: string expected";if(message.avatar!=null&&message.hasOwnProperty("avatar"))if(!$util.isString(message.avatar))return"avatar: string expected";if(message.isAI!=null&&message.hasOwnProperty("isAI"))if(typeof message.isAI!=="boolean")return"isAI: boolean expected";return null};User.fromObject=function fromObject(object){if(object instanceof $root.LCProto.User)return object;var message=new $root.LCProto.User;if(object.name!=null)message.name=String(object.name);if(object.avatar!=null)message.avatar=String(object.avatar);if(object.isAI!=null)message.isAI=Boolean(object.isAI);return message};User.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.name="";object.avatar="";object.isAI=false}if(message.name!=null&&message.hasOwnProperty("name"))object.name=message.name;if(message.avatar!=null&&message.hasOwnProperty("avatar"))object.avatar=message.avatar;if(message.isAI!=null&&message.hasOwnProperty("isAI"))object.isAI=message.isAI;return object};User.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return User}();LCProto.Action=function(){function Action(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}Action.prototype.ID=0;Action.prototype.index=0;Action.prototype.data=$util.newBuffer([]);Action.create=function create(properties){return new Action(properties)};Action.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.ID!=null&&Object.hasOwnProperty.call(message,"ID"))writer.uint32(8).int32(message.ID);if(message.index!=null&&Object.hasOwnProperty.call(message,"index"))writer.uint32(16).int32(message.index);if(message.data!=null&&Object.hasOwnProperty.call(message,"data"))writer.uint32(26).bytes(message.data);return writer};Action.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};Action.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.Action;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.ID=reader.int32();break;case 2:message.index=reader.int32();break;case 3:message.data=reader.bytes();break;default:reader.skipType(tag&7);break}}return message};Action.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};Action.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.ID!=null&&message.hasOwnProperty("ID"))switch(message.ID){default:return"ID: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 101:case 102:case 103:case 104:case 201:case 202:case 203:case 204:case 301:case 302:break}if(message.index!=null&&message.hasOwnProperty("index"))if(!$util.isInteger(message.index))return"index: integer expected";if(message.data!=null&&message.hasOwnProperty("data"))if(!(message.data&&typeof message.data.length==="number"||$util.isString(message.data)))return"data: buffer expected";return null};Action.fromObject=function fromObject(object){if(object instanceof $root.LCProto.Action)return object;var message=new $root.LCProto.Action;switch(object.ID){case"ActionIDNone":case 0:message.ID=0;break;case"ActionIDPing":case 1:message.ID=1;break;case"ActionIDPong":case 2:message.ID=2;break;case"ActionIDCheck":case 3:message.ID=3;break;case"ActionIDRecovery":case 4:message.ID=4;break;case"ActionIDError":case 5:message.ID=5;break;case"ActionIDReady":case 101:message.ID=101;break;case"ActionIDResult":case 102:message.ID=102;break;case"ActionIDExit":case 103:message.ID=103;break;case"ActionIDFinish":case 104:message.ID=104;break;case"ActionIDCreate":case 201:message.ID=201;break;case"ActionIDStart":case 202:message.ID=202;break;case"ActionIDCountDown":case 203:message.ID=203;break;case"ActionIDEnd":case 204:message.ID=204;break;case"ActionIDScore":case 301:message.ID=301;break;case"ActionIDTool":case 302:message.ID=302;break}if(object.index!=null)message.index=object.index|0;if(object.data!=null)if(typeof object.data==="string")$util.base64.decode(object.data,message.data=$util.newBuffer($util.base64.length(object.data)),0);else if(object.data.length)message.data=object.data;return message};Action.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.ID=options.enums===String?"ActionIDNone":0;object.index=0;if(options.bytes===String)object.data="";else{object.data=[];if(options.bytes!==Array)object.data=$util.newBuffer(object.data)}}if(message.ID!=null&&message.hasOwnProperty("ID"))object.ID=options.enums===String?$root.LCProto.ActionID[message.ID]:message.ID;if(message.index!=null&&message.hasOwnProperty("index"))object.index=message.index;if(message.data!=null&&message.hasOwnProperty("data"))object.data=options.bytes===String?$util.base64.encode(message.data,0,message.data.length):options.bytes===Array?Array.prototype.slice.call(message.data):message.data;return object};Action.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return Action}();LCProto.ActionID=function(){var valuesById={},values=Object.create(valuesById);values[valuesById[0]="ActionIDNone"]=0;values[valuesById[1]="ActionIDPing"]=1;values[valuesById[2]="ActionIDPong"]=2;values[valuesById[3]="ActionIDCheck"]=3;values[valuesById[4]="ActionIDRecovery"]=4;values[valuesById[5]="ActionIDError"]=5;values[valuesById[101]="ActionIDReady"]=101;values[valuesById[102]="ActionIDResult"]=102;values[valuesById[103]="ActionIDExit"]=103;values[valuesById[104]="ActionIDFinish"]=104;values[valuesById[201]="ActionIDCreate"]=201;values[valuesById[202]="ActionIDStart"]=202;values[valuesById[203]="ActionIDCountDown"]=203;values[valuesById[204]="ActionIDEnd"]=204;values[valuesById[301]="ActionIDScore"]=301;values[valuesById[302]="ActionIDTool"]=302;return values}();LCProto.DataCheck=function(){function DataCheck(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataCheck.prototype.recvIndex=0;DataCheck.prototype.sendIndex=0;DataCheck.create=function create(properties){return new DataCheck(properties)};DataCheck.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.recvIndex!=null&&Object.hasOwnProperty.call(message,"recvIndex"))writer.uint32(8).int32(message.recvIndex);if(message.sendIndex!=null&&Object.hasOwnProperty.call(message,"sendIndex"))writer.uint32(16).int32(message.sendIndex);return writer};DataCheck.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataCheck.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataCheck;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.recvIndex=reader.int32();break;case 2:message.sendIndex=reader.int32();break;default:reader.skipType(tag&7);break}}return message};DataCheck.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataCheck.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.recvIndex!=null&&message.hasOwnProperty("recvIndex"))if(!$util.isInteger(message.recvIndex))return"recvIndex: integer expected";if(message.sendIndex!=null&&message.hasOwnProperty("sendIndex"))if(!$util.isInteger(message.sendIndex))return"sendIndex: integer expected";return null};DataCheck.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataCheck)return object;var message=new $root.LCProto.DataCheck;if(object.recvIndex!=null)message.recvIndex=object.recvIndex|0;if(object.sendIndex!=null)message.sendIndex=object.sendIndex|0;return message};DataCheck.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.recvIndex=0;object.sendIndex=0}if(message.recvIndex!=null&&message.hasOwnProperty("recvIndex"))object.recvIndex=message.recvIndex;if(message.sendIndex!=null&&message.hasOwnProperty("sendIndex"))object.sendIndex=message.sendIndex;return object};DataCheck.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataCheck}();LCProto.DataRecovery=function(){function DataRecovery(properties){this.actions=[];if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataRecovery.prototype.actions=$util.emptyArray;DataRecovery.create=function create(properties){return new DataRecovery(properties)};DataRecovery.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.actions!=null&&message.actions.length)for(var i=0;i<message.actions.length;++i)$root.LCProto.Action.encode(message.actions[i],writer.uint32(26).fork()).ldelim();return writer};DataRecovery.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataRecovery.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataRecovery;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 3:if(!(message.actions&&message.actions.length))message.actions=[];message.actions.push($root.LCProto.Action.decode(reader,reader.uint32()));break;default:reader.skipType(tag&7);break}}return message};DataRecovery.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataRecovery.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.actions!=null&&message.hasOwnProperty("actions")){if(!Array.isArray(message.actions))return"actions: array expected";for(var i=0;i<message.actions.length;++i){var error=$root.LCProto.Action.verify(message.actions[i]);if(error)return"actions."+error}}return null};DataRecovery.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataRecovery)return object;var message=new $root.LCProto.DataRecovery;if(object.actions){if(!Array.isArray(object.actions))throw TypeError(".LCProto.DataRecovery.actions: array expected");message.actions=[];for(var i=0;i<object.actions.length;++i){if(typeof object.actions[i]!=="object")throw TypeError(".LCProto.DataRecovery.actions: object expected");message.actions[i]=$root.LCProto.Action.fromObject(object.actions[i])}}return message};DataRecovery.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.arrays||options.defaults)object.actions=[];if(message.actions&&message.actions.length){object.actions=[];for(var j=0;j<message.actions.length;++j)object.actions[j]=$root.LCProto.Action.toObject(message.actions[j],options)}return object};DataRecovery.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataRecovery}();LCProto.DataCreate=function(){function DataCreate(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataCreate.prototype.you=null;DataCreate.prototype.opponent=null;DataCreate.prototype.seed=0;DataCreate.prototype.id=0;DataCreate.create=function create(properties){return new DataCreate(properties)};DataCreate.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.you!=null&&Object.hasOwnProperty.call(message,"you"))$root.LCProto.User.encode(message.you,writer.uint32(10).fork()).ldelim();if(message.opponent!=null&&Object.hasOwnProperty.call(message,"opponent"))$root.LCProto.User.encode(message.opponent,writer.uint32(18).fork()).ldelim();if(message.seed!=null&&Object.hasOwnProperty.call(message,"seed"))writer.uint32(24).int32(message.seed);if(message.id!=null&&Object.hasOwnProperty.call(message,"id"))writer.uint32(32).int32(message.id);return writer};DataCreate.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataCreate.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataCreate;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.you=$root.LCProto.User.decode(reader,reader.uint32());break;case 2:message.opponent=$root.LCProto.User.decode(reader,reader.uint32());break;case 3:message.seed=reader.int32();break;case 4:message.id=reader.int32();break;default:reader.skipType(tag&7);break}}return message};DataCreate.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataCreate.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.you!=null&&message.hasOwnProperty("you")){var error=$root.LCProto.User.verify(message.you);if(error)return"you."+error}if(message.opponent!=null&&message.hasOwnProperty("opponent")){var error=$root.LCProto.User.verify(message.opponent);if(error)return"opponent."+error}if(message.seed!=null&&message.hasOwnProperty("seed"))if(!$util.isInteger(message.seed))return"seed: integer expected";if(message.id!=null&&message.hasOwnProperty("id"))if(!$util.isInteger(message.id))return"id: integer expected";return null};DataCreate.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataCreate)return object;var message=new $root.LCProto.DataCreate;if(object.you!=null){if(typeof object.you!=="object")throw TypeError(".LCProto.DataCreate.you: object expected");message.you=$root.LCProto.User.fromObject(object.you)}if(object.opponent!=null){if(typeof object.opponent!=="object")throw TypeError(".LCProto.DataCreate.opponent: object expected");message.opponent=$root.LCProto.User.fromObject(object.opponent)}if(object.seed!=null)message.seed=object.seed|0;if(object.id!=null)message.id=object.id|0;return message};DataCreate.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.you=null;object.opponent=null;object.seed=0;object.id=0}if(message.you!=null&&message.hasOwnProperty("you"))object.you=$root.LCProto.User.toObject(message.you,options);if(message.opponent!=null&&message.hasOwnProperty("opponent"))object.opponent=$root.LCProto.User.toObject(message.opponent,options);if(message.seed!=null&&message.hasOwnProperty("seed"))object.seed=message.seed;if(message.id!=null&&message.hasOwnProperty("id"))object.id=message.id;return object};DataCreate.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataCreate}();LCProto.DataCountDown=function(){function DataCountDown(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataCountDown.prototype.value=0;DataCountDown.create=function create(properties){return new DataCountDown(properties)};DataCountDown.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.value!=null&&Object.hasOwnProperty.call(message,"value"))writer.uint32(8).int32(message.value);return writer};DataCountDown.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataCountDown.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataCountDown;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.value=reader.int32();break;default:reader.skipType(tag&7);break}}return message};DataCountDown.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataCountDown.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.value!=null&&message.hasOwnProperty("value"))if(!$util.isInteger(message.value))return"value: integer expected";return null};DataCountDown.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataCountDown)return object;var message=new $root.LCProto.DataCountDown;if(object.value!=null)message.value=object.value|0;return message};DataCountDown.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults)object.value=0;if(message.value!=null&&message.hasOwnProperty("value"))object.value=message.value;return object};DataCountDown.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataCountDown}();LCProto.DataResult=function(){function DataResult(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataResult.prototype.result=0;DataResult.prototype.nonstr="";DataResult.prototype.sign="";DataResult.prototype.resultrawdata="";DataResult.prototype.timestamp="";DataResult.prototype.yourScore=0;DataResult.prototype.opponentScore=0;DataResult.create=function create(properties){return new DataResult(properties)};DataResult.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.result!=null&&Object.hasOwnProperty.call(message,"result"))writer.uint32(8).int32(message.result);if(message.nonstr!=null&&Object.hasOwnProperty.call(message,"nonstr"))writer.uint32(18).string(message.nonstr);if(message.sign!=null&&Object.hasOwnProperty.call(message,"sign"))writer.uint32(26).string(message.sign);if(message.resultrawdata!=null&&Object.hasOwnProperty.call(message,"resultrawdata"))writer.uint32(34).string(message.resultrawdata);if(message.timestamp!=null&&Object.hasOwnProperty.call(message,"timestamp"))writer.uint32(42).string(message.timestamp);if(message.yourScore!=null&&Object.hasOwnProperty.call(message,"yourScore"))writer.uint32(48).int32(message.yourScore);if(message.opponentScore!=null&&Object.hasOwnProperty.call(message,"opponentScore"))writer.uint32(56).int32(message.opponentScore);return writer};DataResult.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataResult.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataResult;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.result=reader.int32();break;case 2:message.nonstr=reader.string();break;case 3:message.sign=reader.string();break;case 4:message.resultrawdata=reader.string();break;case 5:message.timestamp=reader.string();break;case 6:message.yourScore=reader.int32();break;case 7:message.opponentScore=reader.int32();break;default:reader.skipType(tag&7);break}}return message};DataResult.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataResult.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.result!=null&&message.hasOwnProperty("result"))if(!$util.isInteger(message.result))return"result: integer expected";if(message.nonstr!=null&&message.hasOwnProperty("nonstr"))if(!$util.isString(message.nonstr))return"nonstr: string expected";if(message.sign!=null&&message.hasOwnProperty("sign"))if(!$util.isString(message.sign))return"sign: string expected";if(message.resultrawdata!=null&&message.hasOwnProperty("resultrawdata"))if(!$util.isString(message.resultrawdata))return"resultrawdata: string expected";if(message.timestamp!=null&&message.hasOwnProperty("timestamp"))if(!$util.isString(message.timestamp))return"timestamp: string expected";if(message.yourScore!=null&&message.hasOwnProperty("yourScore"))if(!$util.isInteger(message.yourScore))return"yourScore: integer expected";if(message.opponentScore!=null&&message.hasOwnProperty("opponentScore"))if(!$util.isInteger(message.opponentScore))return"opponentScore: integer expected";return null};DataResult.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataResult)return object;var message=new $root.LCProto.DataResult;if(object.result!=null)message.result=object.result|0;if(object.nonstr!=null)message.nonstr=String(object.nonstr);if(object.sign!=null)message.sign=String(object.sign);if(object.resultrawdata!=null)message.resultrawdata=String(object.resultrawdata);if(object.timestamp!=null)message.timestamp=String(object.timestamp);if(object.yourScore!=null)message.yourScore=object.yourScore|0;if(object.opponentScore!=null)message.opponentScore=object.opponentScore|0;return message};DataResult.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.result=0;object.nonstr="";object.sign="";object.resultrawdata="";object.timestamp="";object.yourScore=0;object.opponentScore=0}if(message.result!=null&&message.hasOwnProperty("result"))object.result=message.result;if(message.nonstr!=null&&message.hasOwnProperty("nonstr"))object.nonstr=message.nonstr;if(message.sign!=null&&message.hasOwnProperty("sign"))object.sign=message.sign;if(message.resultrawdata!=null&&message.hasOwnProperty("resultrawdata"))object.resultrawdata=message.resultrawdata;if(message.timestamp!=null&&message.hasOwnProperty("timestamp"))object.timestamp=message.timestamp;if(message.yourScore!=null&&message.hasOwnProperty("yourScore"))object.yourScore=message.yourScore;if(message.opponentScore!=null&&message.hasOwnProperty("opponentScore"))object.opponentScore=message.opponentScore;return object};DataResult.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataResult}();LCProto.DataExit=function(){function DataExit(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataExit.prototype.id=0;DataExit.create=function create(properties){return new DataExit(properties)};DataExit.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.id!=null&&Object.hasOwnProperty.call(message,"id"))writer.uint32(8).int32(message.id);return writer};DataExit.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataExit.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataExit;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.id=reader.int32();break;default:reader.skipType(tag&7);break}}return message};DataExit.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataExit.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.id!=null&&message.hasOwnProperty("id"))if(!$util.isInteger(message.id))return"id: integer expected";return null};DataExit.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataExit)return object;var message=new $root.LCProto.DataExit;if(object.id!=null)message.id=object.id|0;return message};DataExit.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults)object.id=0;if(message.id!=null&&message.hasOwnProperty("id"))object.id=message.id;return object};DataExit.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataExit}();LCProto.DataScore=function(){function DataScore(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataScore.prototype.value=0;DataScore.prototype.isAI=false;DataScore.create=function create(properties){return new DataScore(properties)};DataScore.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.value!=null&&Object.hasOwnProperty.call(message,"value"))writer.uint32(8).int32(message.value);if(message.isAI!=null&&Object.hasOwnProperty.call(message,"isAI"))writer.uint32(16).bool(message.isAI);return writer};DataScore.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataScore.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataScore;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.value=reader.int32();break;case 2:message.isAI=reader.bool();break;default:reader.skipType(tag&7);break}}return message};DataScore.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataScore.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.value!=null&&message.hasOwnProperty("value"))if(!$util.isInteger(message.value))return"value: integer expected";if(message.isAI!=null&&message.hasOwnProperty("isAI"))if(typeof message.isAI!=="boolean")return"isAI: boolean expected";return null};DataScore.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataScore)return object;var message=new $root.LCProto.DataScore;if(object.value!=null)message.value=object.value|0;if(object.isAI!=null)message.isAI=Boolean(object.isAI);return message};DataScore.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.value=0;object.isAI=false}if(message.value!=null&&message.hasOwnProperty("value"))object.value=message.value;if(message.isAI!=null&&message.hasOwnProperty("isAI"))object.isAI=message.isAI;return object};DataScore.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataScore}();LCProto.DataTool=function(){function DataTool(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)if(properties[keys[i]]!=null)this[keys[i]]=properties[keys[i]]}DataTool.prototype.value=0;DataTool.prototype.isAI=false;DataTool.create=function create(properties){return new DataTool(properties)};DataTool.encode=function encode(message,writer){if(!writer)writer=$Writer.create();if(message.value!=null&&Object.hasOwnProperty.call(message,"value"))writer.uint32(8).int32(message.value);if(message.isAI!=null&&Object.hasOwnProperty.call(message,"isAI"))writer.uint32(16).bool(message.isAI);return writer};DataTool.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()};DataTool.decode=function decode(reader,length){if(!(reader instanceof $Reader))reader=$Reader.create(reader);var end=length===undefined?reader.len:reader.pos+length,message=new $root.LCProto.DataTool;while(reader.pos<end){var tag=reader.uint32();switch(tag>>>3){case 1:message.value=reader.int32();break;case 2:message.isAI=reader.bool();break;default:reader.skipType(tag&7);break}}return message};DataTool.decodeDelimited=function decodeDelimited(reader){if(!(reader instanceof $Reader))reader=new $Reader(reader);return this.decode(reader,reader.uint32())};DataTool.verify=function verify(message){if(typeof message!=="object"||message===null)return"object expected";if(message.value!=null&&message.hasOwnProperty("value"))if(!$util.isInteger(message.value))return"value: integer expected";if(message.isAI!=null&&message.hasOwnProperty("isAI"))if(typeof message.isAI!=="boolean")return"isAI: boolean expected";return null};DataTool.fromObject=function fromObject(object){if(object instanceof $root.LCProto.DataTool)return object;var message=new $root.LCProto.DataTool;if(object.value!=null)message.value=object.value|0;if(object.isAI!=null)message.isAI=Boolean(object.isAI);return message};DataTool.toObject=function toObject(message,options){if(!options)options={};var object={};if(options.defaults){object.value=0;object.isAI=false}if(message.value!=null&&message.hasOwnProperty("value"))object.value=message.value;if(message.isAI!=null&&message.hasOwnProperty("isAI"))object.isAI=message.isAI;return object};DataTool.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return DataTool}();return LCProto}();return $root})(protobuf);(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hagoDelegate_1=require("./runtime/hagoDelegate");var Client=function(){function Client(){this.onConnect=function(mode){console.log("未监听 onConnect",mode)};this.onFinish=function(){console.log("未监听 onFinish")};this.onReady=function(){console.log("未监听 onReady")};this.onCreate=function(data){console.log("未监听 onCreate",data)};this.onCountDown=function(v){console.log("未监听 onCountDown",v)};this.onStart=function(){console.log("未监听 onStart")};this.onScore=function(v,isAI){console.log("未监听 onScore",v)};this.onTool=function(v,isAI){console.log("未监听 onTool",v)};this.onOpponentScore=function(v){console.log("未监听 onOpponentScore",v)};this.onOpponentTool=function(v){console.log("未监听 onOpponentTool",v)};this.onResult=function(v,yourScore,opponentScore){console.log("未监听 onResult",v,yourScore,opponentScore)};this.onReconnectBegin=function(){console.log("未监听 onReconnectBegin")};this.onReconnectFinish=function(){console.log("未监听 onReconnectFinish")};this.onClose=function(){console.log("未监听 onClose")}}Client.prototype.connect=function(mode){hagoDelegate_1.hagoDelegate.onPKFinishLoading();this.onConnect(mode)};Client.prototype.create=function(data){this.onCreate(data)};Client.prototype.ready=function(){this.onReady()};Client.prototype.start=function(){this.onStart()};Client.prototype.score=function(v,isAI){this.onScore(v,isAI)};Client.prototype.tool=function(v,isAI){this.onTool(v,isAI)};Client.prototype.countDown=function(v){this.onCountDown(v)};Client.prototype.finish=function(){this.onFinish()};Client.prototype.result=function(data){this.onResult(data.result,data.yourScore,data.opponentScore);var result={timestamp:parseInt(data.timestamp),nonstr:data.nonstr,sign:data.sign,gametype:"1v1_pk",result:JSON.parse(data.resultrawdata)};setTimeout(function(){console.log("hagoDelegate.onPKFinish");hagoDelegate_1.hagoDelegate.onPKFinish(result)},3e3)};return Client}();exports.Client=Client},{"./runtime/hagoDelegate":8}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var actionPingBytes;var actionPongBytes;var ConnectionStatus;(function(ConnectionStatus){ConnectionStatus[ConnectionStatus["CLOSED"]=0]="CLOSED";ConnectionStatus[ConnectionStatus["RECONNECTING"]=1]="RECONNECTING";ConnectionStatus[ConnectionStatus["OPEN"]=2]="OPEN";ConnectionStatus[ConnectionStatus["CONNECTING"]=3]="CONNECTING";ConnectionStatus[ConnectionStatus["CLOSING"]=4]="CLOSING"})(ConnectionStatus=exports.ConnectionStatus||(exports.ConnectionStatus={}));var Connection=function(){function Connection(){this.status=ConnectionStatus.CLOSED;this.sendIndex=0;this.sendActions=[];this.recvIndex=0;this.isHidden=false;this.pingInterval=3;this.timeoutInterval=6;this.closeInterval=15;this.pingDuration=0;this.timeoutDuration=0;this.closeDuration=0;this.isReconnect=false;this.hasOpen=false;this.disconnectDuration=0;{var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDPong;actionPongBytes=LCProto.Action.encode(action).finish()}{var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDPing;actionPingBytes=LCProto.Action.encode(action).finish()}}Connection.prototype.connect=function(url){if(this.status!=ConnectionStatus.CLOSED){return}this.url=url+"&current="+Date.now();this.status=ConnectionStatus.CONNECTING;this.createWebsocket();this.startInterval()};Connection.prototype.reconnect=function(){if(this.ws!=null){return}if(this.status==ConnectionStatus.CLOSED){return}this.reconnectBegin();this.status=ConnectionStatus.RECONNECTING;if(this.disconnectDuration>0){return}this.createWebsocket()};Connection.prototype.reconnectBegin=function(){if(this.isReconnect==false){this.isReconnect=true;if(this.onReconnectBegin){this.onReconnectBegin()}}};Connection.prototype.reconnectFinish=function(){if(this.isReconnect==true){this.isReconnect=false;this.check();if(this.onReconnectFinish){this.onReconnectFinish()}}};Connection.prototype.createWebsocket=function(){var _this=this;var url=this.url;if(this.hasOpen&&this.isReconnect){url+="&reconnect=1"}var ws=new WebSocket(url);this.ws=ws;ws.onopen=function(){_this.hasOpen=true;if(_this.status==ConnectionStatus.CLOSED){ws.close();return}ws.binaryType="arraybuffer";_this.status=ConnectionStatus.OPEN;_this.resetSchedulers();_this.reconnectFinish()};ws.onmessage=function(evt){if(_this.disconnectDuration>0){return}_this.reconnectFinish();_this.resetSchedulers();var uint8array=new Uint8Array(evt.data);var action=LCProto.Action.decode(uint8array);if(action.index==0){switch(action.ID){case LCProto.ActionID.ActionIDPing:_this.send(actionPongBytes);break;case LCProto.ActionID.ActionIDCheck:{var data=LCProto.DataCheck.decode(action.data);if(data.sendIndex<_this.sendIndex){for(var i=data.sendIndex,len=_this.sendIndex;i<len;++i){_this.send(_this.sendActions[i])}}else if(data.sendIndex>_this.sendIndex){_this.close()}}break;case LCProto.ActionID.ActionIDRecovery:{var data=LCProto.DataRecovery.decode(action.data);data.actions.forEach(function(action){if(_this.recvAction(action)){_this.onAction(action)}})}break;case LCProto.ActionID.ActionIDError:_this.close();break;case LCProto.ActionID.ActionIDCountDown:_this.onAction(action);break}}else{if(_this.recvAction(action)){_this.onAction(action)}}};ws.onclose=function(){ws.onopen=null;ws.onmessage=null;ws.onclose=null;_this.ws=null;_this.reconnect()}};Connection.prototype.resetSchedulers=function(){this.pingDuration=0;this.timeoutDuration=0;this.closeDuration=0};Connection.prototype.startInterval=function(){var _this=this;if(this.intervalNumber!=null){return}this.intervalNumber=setInterval(function(){_this.pingDuration+=.5;_this.timeoutDuration+=.5;_this.closeDuration+=.5;_this.disconnectDuration-=.5;if(_this.closeDuration>=_this.closeInterval){_this.closeDuration=0;_this.close();return}if(_this.timeoutDuration>=_this.timeoutInterval){_this.reconnect()}if(_this.pingDuration>=_this.pingInterval){_this.pingDuration=0;_this.ping()}},500)};Connection.prototype.disconnect=function(seconds){this.disconnectDuration=seconds;this.status=ConnectionStatus.RECONNECTING;this.ws.close()};Connection.prototype.ping=function(){this.send(actionPingBytes)};Connection.prototype.send=function(msg){if(this.status==ConnectionStatus.OPEN&&!this.isHidden){this.ws.send(msg);return true}return false};Connection.prototype.sendAction=function(action){action.index=this.sendIndex+1;this.sendIndex=action.index;var bytes=LCProto.Action.encode(action).finish();this.send(bytes);this.sendActions.push(bytes)};Connection.prototype.check=function(){var data=new LCProto.DataCheck;data.recvIndex=this.recvIndex;data.sendIndex=this.sendIndex;var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDCheck;action.data=LCProto.DataCheck.encode(data).finish();this.send(LCProto.Action.encode(action).finish())};Connection.prototype.recvAction=function(action){if(this.recvIndex+1==action.index){this.recvIndex=action.index;return true}else if(this.recvIndex<action.index){this.check()}else{}return false};Connection.prototype.close=function(){if(this.status!=ConnectionStatus.CLOSED){this.status=ConnectionStatus.CLOSED;if(this.intervalNumber){clearInterval(this.intervalNumber);this.intervalNumber=null}if(this.ws){this.ws.close();this.ws=null}if(this.onClose){this.onClose()}}};return Connection}();exports.Connection=Connection},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var isHago=false;try{if(hg!=null){isHago=true}}catch(error){}console.log("isHago",isHago);var HagoDelegate=function(){function HagoDelegate(){}HagoDelegate.prototype.onPKFinishLoading=function(){if(isHago){hg.gameLoadResult()}};HagoDelegate.prototype.onPKStart=function(){if(isHago){hg.pkStart()}};HagoDelegate.prototype.onPKFinish=function(result){if(isHago){console.log("hago.onPKFinish",result);hg.pkFinish(result)}};HagoDelegate.prototype.onPKExceptionFinish=function(){if(isHago){console.log("hago.onPKExceptionFinish");hg.pkFinishError({message:"connect to server timeout",code:"100"})}};HagoDelegate.prototype.exit=function(cb){if(isHago){hg.listenPkExit(cb)}};HagoDelegate.prototype.getDeviceInfo=function(params){if(isHago){hg.getDeviceInfo(params)}};return HagoDelegate}();exports.HagoDelegate=HagoDelegate},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function getConnectionUrl(mode){if(mode===void 0){mode=0}if(mode==0){return hg.getMatchupUrl()}var query=window.location.href;if(mode==1){query="/yingxiongkongzhan/2d935255-6d46-438c-a542-ec1900330ff8?post_data=%7B%22channelid%22%3A%22aifeidongman%22%2C%22gameid%22%3A%22yingxiongkongzhan%5Fyn%22%2C%22roomid%22%3A%222d935255-6d46-438c-a542-ec1900330ff8%22%2C%22player%22%3A%7B%22uid%22%3A%22101307415%22%2C%22name%22%3A%22%E5%93%A6%E5%93%A6%22%2C%22avatarurl%22%3A%22https%3A%2F%2Fo-id.ihago.net%2Fuser%5Favatar%2F101307415%5F1536377561510.jpeg%22%2C%22opt%22%3A%22%7B%5C%22ai%5C%22%3A1%2C%5C%22level%5C%22%3A4%2C%5C%22ai%5Finfo%5C%22%3A%7B%5C%22uid%5C%22%3A%5C%22900000069%5C%22%2C%5C%22nick%5C%22%3A%5C%22wahyurika11%5C%22%2C%5C%22sex%5C%22%3A1%7D%7D%22%2C%22teamid%22%3A%22%22%2C%22sex%22%3A0%2C%22kv%5Fsign%22%3A%22ztPRe9j3kTPZ5hE5HNJCJFJjRAjwVoT2%22%7D%7D&timestamp=1562899305&nonstr=2rpxrt8b-nvui-9o4b-kolo-aujesjgjbdd3&sign=cc4b7cc67066426e2271c20f6c722c7a126bac8d&transport=websocket"+"&kv_url=i-test-863.ihago.net&wsscheme=ws&websocketdomain=192.168.0.111&port=8888"}else if(mode==2){query="/yingxiongkongzhan/e63bbc5c-c683-49c9-bfc2-0e3154a89b8e?nonstr=lkg97o1n-l8w1-cu0u-bcew-xklz20u5j8w0&sign=b74f8bf04bd75b816e695f86e4f9b373d7182802&timestamp=1567393392&post_data=%7B%22channelid%22%3A%22yy%22%2C%22gameid%22%3A%22yingxiongkongzhan%22%2C%22roomid%22%3A%22e63bbc5c-c683-49c9-bfc2-0e3154a89b8e%22%2C%22player%22%3A%7B%22uid%22%3A%2211119999%22%2C%22name%22%3A%22hagotest%22%2C%22avatarurl%22%3A%22%22%2C%22opt%22%3A%22%22%2C%22teamid%22%3A%22%22%2C%22sex%22%3A1%2C%22kv_sign%22%3A%22%22%7D%7D&transport=websocket"+"&kv_url=i-test-863.ihago.net&wsscheme=ws&websocketdomain=192.168.0.111&port=8888"}console.log(query);var form={};var forms=query.split("?")[1].split("&");forms.forEach(function(formStr){var a=formStr.split("=");form[a[0]]=decodeURIComponent(a[1])});var wsscheme=form["wsscheme"];var websocketdomain=form["websocketdomain"];var port=form["port"];var postData=form["post_data"];var timestamp=form["timestamp"];var nonstr=form["nonstr"];var sign=form["sign"];var kv_url=form["kv_url"];var pd=JSON.parse(postData);var gameid=pd.gameid;var roomid=pd.roomid;var url=wsscheme+"://"+websocketdomain+":"+port+"/"+gameid+"/"+roomid+"?post_data="+encodeURIComponent(postData)+"&timestamp="+timestamp+"&nonstr="+nonstr+"&sign="+sign+"&kv_url="+kv_url;return url}exports.getConnectionUrl=getConnectionUrl},{}],5:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./runtime/client"))},{"./runtime/client":6}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Client_1=require("../Client");var connection_1=require("./connection");var getConnectionUrl_1=require("../getConnectionUrl");var hagoDelegate_1=require("./hagoDelegate");exports.client=new Client_1.Client;window["LCHago"]=exports.client;window["LCHago"].disconnect=function(v){connection_1.connection.disconnect(v)};exports.client.onConnect=function(mode){if(mode===void 0){mode=0}connection_1.connection.connect(getConnectionUrl_1.getConnectionUrl(mode))};exports.client.onStart=function(){console.log("onStart")};exports.client.onFinish=function(){var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDFinish;connection_1.connection.sendAction(action)};exports.client.onReady=function(){console.log("ready");var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDReady;connection_1.connection.sendAction(action)};exports.client.onScore=function(v,isAI){console.log("onScore");var data=new LCProto.DataScore;data.value=v;data.isAI=isAI;var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDScore;action.data=LCProto.DataScore.encode(data).finish();connection_1.connection.sendAction(action)};exports.client.onTool=function(v,isAI){console.log("onTool");var data=new LCProto.DataTool;data.value=v;data.isAI=isAI;var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDTool;action.data=LCProto.DataTool.encode(data).finish();connection_1.connection.sendAction(action)};exports.client.onOpponentScore=function(v){console.log("onOpponentScore",v)};exports.client.onOpponentTool=function(v){console.log("onOpponentTool",v)};window["LCHago"].exit=function(v){exports.client.onResult(2,-1,-1);var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDExit;connection_1.connection.sendAction(action);exports.client.onResult=function(){};exports.client.onReconnectBegin=function(){};exports.client.onClose=function(){};exports.client.onReconnectFinish=function(){};connection_1.connection.close()};hagoDelegate_1.hagoDelegate.exit(function(){exports.client.onResult(2,-1,-1);var action=new LCProto.Action;action.ID=LCProto.ActionID.ActionIDExit;connection_1.connection.sendAction(action);exports.client.onResult=function(){};exports.client.onReconnectBegin=function(){};exports.client.onClose=function(){};exports.client.onReconnectFinish=function(){};connection_1.connection.close()})},{"../Client":1,"../getConnectionUrl":4,"./connection":7,"./hagoDelegate":8}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Connection_1=require("../Connection");var client_1=require("./client");var hagoDelegate_1=require("./hagoDelegate");exports.connection=new Connection_1.Connection;var hasResult=false;var hasStart=false;exports.connection.onAction=function(action){switch(action.ID){case LCProto.ActionID.ActionIDCreate:client_1.client.create(LCProto.DataCreate.decode(action.data));break;case LCProto.ActionID.ActionIDStart:hasStart=true;client_1.client.start();break;case LCProto.ActionID.ActionIDScore:client_1.client.onOpponentScore(LCProto.DataScore.decode(action.data).value);break;case LCProto.ActionID.ActionIDTool:client_1.client.onOpponentTool(LCProto.DataTool.decode(action.data).value);break;case LCProto.ActionID.ActionIDResult:hasResult=true;client_1.client.result(LCProto.DataResult.decode(action.data));{var action_1=new LCProto.Action;action_1.ID=LCProto.ActionID.ActionIDExit;exports.connection.sendAction(action_1)}exports.connection.close();break;case LCProto.ActionID.ActionIDCountDown:client_1.client.countDown(LCProto.DataCountDown.decode(action.data).value);break}};exports.connection.onReconnectBegin=function(){client_1.client.onReconnectBegin()};exports.connection.onReconnectFinish=function(){client_1.client.onReconnectFinish()};exports.connection.onClose=function(){console.log("onClose",hasResult);if(hasResult==false){client_1.client.onClose();hasResult=true;setTimeout(function(){console.log(" hagoDelegate.onPKExceptionFinish");hagoDelegate_1.hagoDelegate.onPKExceptionFinish()},3e3)}};setTimeout(function(){if(hasStart==false&&hasResult==false){console.log("游戏开始超时 平局",hasStart==false);hasResult=true;hagoDelegate_1.hagoDelegate.onPKExceptionFinish()}},15e3);document.addEventListener("visibilitychange",function(event){if(typeof document.visibilityState=="string"){if(document.visibilityState=="hidden"){exports.connection.isHidden=true}else{exports.connection.isHidden=false}}else{if(event.hidden){exports.connection.isHidden=true}else{exports.connection.isHidden=false}}})},{"../Connection":2,"./client":6,"./hagoDelegate":8}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var HagoDelegate_1=require("../HagoDelegate");exports.hagoDelegate=new HagoDelegate_1.HagoDelegate},{"../HagoDelegate":3}]},{},[5]);